{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Dashboard | EcoTrack</title>

  <!-- =========================
       Font Awesome for Icons
       ========================= -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- =========================
       Internal CSS for Dashboard Styling
       ========================= -->
  <style>
    /* =====================================================
       Root Variables
       Define main colors, shadows, and background image
       ===================================================== */
    :root {
      --bg-image: url("{% static 'images/bgimg.jpg' %}"); /* Background image for the page */
      --primary: #00bfa6;    /* Main accent color for headings and buttons */
      --secondary: #a8e6cf;  /* Secondary color for hover effects and highlights */
      --highlight: #00c4cc;  /* Color for icons and highlighted text */
      --text-dark: #1e293b;  /* Main text color */
      --shadow: rgba(0, 0, 0, 0.15); /* Shadow color for cards and sidebar */
    }

    /* =====================================================
       Body & Container
       Define overall page layout, font, and background
       ===================================================== */
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg-image) no-repeat center center/cover; /* Set background image */
      color: var(--text-dark);
    }

    /* Main container that holds Sidebar and Main Content */
    .container {
      display: flex; /* Sidebar + Main content side by side */
      min-height: 100vh;
      background: linear-gradient(to right, rgba(255,255,255,0.8), rgba(168,230,207,0.7)); /* Soft gradient overlay */
    }

    /* =====================================================
       Sidebar Styling
       ===================================================== */
    .sidebar {
      width: 260px; /* Full width when expanded */
      background: linear-gradient(to top, rgba(255,255,255,0.8), rgba(168,230,207,0.7));
      backdrop-filter: blur(12px); /* Glassmorphism effect */
      box-shadow: 2px 0 12px var(--shadow); /* Shadow on right edge */
      transition: width 0.3s ease, padding 0.3s ease; /* Smooth collapse */
    }

    /* Collapsed sidebar */
    .sidebar.collapsed { width: 70px; padding: 0; }

    /* Sidebar brand/logo */
    .sidebar h2 {
      text-align: center;
      padding: 20px 0;
      font-size: 1.6rem;
      margin: 0;
      color: var(--primary);
    }

    /* Toggle button for collapsing sidebar */
    .toggle-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      background: none;
      border: none;
      font-size: 22px;
      color: var(--text-dark);
      cursor: pointer;
    }

    /* Sidebar navigation list */
    .sidebar ul { list-style: none; padding:0; margin:0; }

    /* Sidebar links */
    .sidebar ul li a {
      display: flex;
      align-items: center;
      gap: 12px; /* Space between icon and text */
      padding: 14px 22px;
      color: var(--text-dark);
      text-decoration: none;
      border-radius: 8px;
      transition: background 0.3s ease;
    }

    /* Hover effect for links */
    .sidebar ul li a:hover { background: var(--secondary); }

    /* Hide text labels in collapsed state */
    .sidebar.collapsed ul li span { display: none; }

    /* =====================================================
       Main Content Styling
       ===================================================== */
    .main {
      flex: 1; /* Takes remaining space */
      padding: 24px;
      backdrop-filter: blur(6px);
    }

    /* Dashboard header title */
    .dashboard-header {
      font-size: 26px;
      font-weight: bold;
      margin-bottom: 25px;
      color: var(--primary);
    }

    /* =====================================================
       Card Container
       ===================================================== */
    .card-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px,1fr)); /* Responsive grid for cards */
      gap: 20px;
    }

    /* Individual cards */
    .card {
      background: rgba(255,255,255,0.6); /* Transparent background for glass effect */
      backdrop-filter: blur(10px);
      padding: 24px;
      border-radius: 16px;
      text-align: center;
      box-shadow: 0 4px 20px var(--shadow);
      transition: transform 0.2s;
    }

    /* Card hover effect */
    .card:hover { transform: translateY(-5px); }

    /* Icon inside card */
    .card i { font-size:26px; color: var(--highlight); margin-bottom:10px; }

    /* Card heading */
    .card h3 { font-size:18px; margin-bottom:8px; color: var(--primary); }

    /* Card value or data */
    .card p {
      font-size:22px;
      font-weight:bold;
      background: var(--primary);
      display:inline-block;
      padding:6px 16px;
      border-radius:12px;
      color:#ffffff;
      box-shadow:0 2px 10px var(--shadow);
    }

    /* =====================================================
       Extra Section: Profile & Weekly Chart
       ===================================================== */
    .extra-section {
      margin-top:40px;
      display:flex;
      flex-wrap:wrap;
      gap:20px;
    }

    /* Profile box */
    .profile-box {
      flex: 1 1 300px;
      background: rgba(255,255,255,0.6);
      backdrop-filter: blur(10px);
      padding:20px;
      border-radius:16px;
      box-shadow:0 4px 20px var(--shadow);
    }

    /* Bar chart box */
    .bar-chart-box {
      flex: 1 1 300px;
      background: rgba(255,255,255,0.6);
      backdrop-filter: blur(10px);
      padding:20px;
      border-radius:16px;
      box-shadow:0 4px 20px var(--shadow);
    }

    /* Box headings */
    .profile-box h3, .bar-chart-box h3 { margin-bottom:16px; font-size:20px; color: var(--primary); }

    /* Bar chart individual bar container */
    .bar { height:18px; margin:8px 0; background-color: rgba(0,0,0,0.05); border-radius:10px; }

    /* Bar chart fill */
    .bar span { display:block; height:100%; border-radius:10px; background: var(--primary); }

    /* Bar labels */
    .bar-label { font-size:14px; margin-bottom:4px; }

    /* =====================================================
       Responsive Styling
       ===================================================== */
    @media screen and (max-width:768px){
      .sidebar { position:fixed; height:100%; z-index:1000; }
      .main { margin-left:70px; }
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- =====================================================
         Sidebar Section
         Contains links to all admin pages
         ===================================================== -->
    <div class="sidebar" id="sidebar">
      <h2 id="brandText">EcoTrack</h2>
      <button class="toggle-btn" onclick="toggleSidebar()">‚ò∞</button>
      <ul>
        <li><a href="{% url 'admin_dashboard' %}"><i>üè†</i> <span>Dashboard</span></a></li>
        <li><a href="{% url 'pickup_management' %}"><i>üóëÔ∏è</i> <span>Pickup Management</span></a></li>
        <li><a href="{% url 'zone_management' %}"><i>üìç</i> <span>Zone Management</span></a></li>
        <li><a href="{% url 'leave_req_management' %}"><i>üìÖ</i> <span>Leave Requests</span></a></li>
        <li><a href="{% url 'complaint_management' %}"><i>üì¢</i> <span>Complaints</span></a></li>
        <li><a href="{% url 'user_management' %}"><i>üßë‚Äçü§ù‚Äçüßë</i> <span>User Management</span></a></li>
        <li><a href="{% url 'collector_management' %}"><i>üë∑‚Äç‚ôÇÔ∏è</i> <span>Collector Management</span></a></li>
        <li><a href="{% url 'analytics' %}"><i>üìä</i> <span>Analytics</span></a></li>
        <li><a href="{% url 'admin_profile' %}"><i>üë§</i> <span>Admin Profile</span></a></li>
      </ul>
    </div>

    <!-- =====================================================
         Main Content Section
         Contains Dashboard Header, Info Cards, and Extra Boxes
         ===================================================== -->
    <div class="main">
      <!-- Dashboard Header -->
      <div class="dashboard-header">Admin Dashboard Overview</div>

      <!-- Info Cards Grid -->
      <div class="card-container">
        <div class="card">
          <i class="fas fa-truck"></i>
          <h3>Total Pickup Requests</h3>
          <p>{{ total_pickup_requests }}</p>
          <span style="display:block; margin-top:6px;">Completed: {{ completed_pickups }} &nbsp;&nbsp; üïí Active: {{ active_pickups }}</span>
        </div>
        <div class="card"><i class="fas fa-plus-circle"></i><h3>New Pickup Requests</h3><p>{{ new_pickup_requests }}</p></div>
        <div class="card"><i class="fas fa-times-circle"></i><h3>Missed Pickups</h3><p>{{ missed_pickups }}</p></div>
        <div class="card"><i class="fas fa-comment-alt"></i><h3>New Complaints</h3><p>{{ new_complaints }}</p></div>
        <div class="card"><i class="fas fa-calendar-minus"></i><h3>New Leave Requests</h3><p>{{ new_leave_requests }}</p></div>
        <div class="card"><i class="fas fa-user-plus"></i><h3>New Collectors</h3><p>{{ new_collectors }}</p></div>
        <div class="card"><i class="fas fa-exclamation-triangle"></i><h3>System Alerts</h3><p>{{ system_alerts }}</p></div>
        <div class="card">
          <i class="fas fa-user"></i>
          <h3>Active Collectors</h3>
          <p>{{ active_collectors }}</p>
          <strong style="color:#ff5252; display:block; margin-top:6px;">{{ collectors_on_leave_today }} on leave today</strong>
        </div>
      </div>

      <!-- Extra Section: Profile Box and Weekly Bar Chart -->
      <div class="extra-section">
        <!-- Profile Box -->
        <div class="profile-box">
          <h3><i class="fas fa-user-circle"></i> Quick Profile Access</h3>
          <p>Logged in as <strong>Admin (eco_admin01)</strong></p>
          <p><a href="#">Edit Profile</a> | <a href="#">Change Password</a></p>
        </div>

        <!-- Weekly Pickup Bar Chart -->
        <div class="bar-chart-box">
          <h3><i class="fas fa-chart-bar"></i> Weekly Pickup Overview</h3>
          <div class="bar-label">Monday</div><div class="bar"><span style="width:80%"></span></div>
          <div class="bar-label">Tuesday</div><div class="bar"><span style="width:60%"></span></div>
          <div class="bar-label">Wednesday</div><div class="bar"><span style="width:90%"></span></div>
          <div class="bar-label">Thursday</div><div class="bar"><span style="width:70%"></span></div>
          <div class="bar-label">Friday</div><div class="bar"><span style="width:75%"></span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- =====================================================
       JavaScript for Sidebar Toggle
       ===================================================== -->
  <script>
    function toggleSidebar() {
      const sidebar = document.getElementById("sidebar");
      sidebar.classList.toggle("collapsed"); // Adds/removes class for collapse effect
    }
  </script>
</body>
</html>
